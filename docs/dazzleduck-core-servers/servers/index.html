<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-dazzleduck-core-servers/servers" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Core Dazzleduck Servers | DazzleDuck SQL Server</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://dazzleduck-web.github.io/dazzleduck-website/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://dazzleduck-web.github.io/dazzleduck-website/img/logo.png"><meta data-rh="true" property="og:url" content="https://dazzleduck-web.github.io/dazzleduck-website/docs/dazzleduck-core-servers/servers"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Core Dazzleduck Servers | DazzleDuck SQL Server"><meta data-rh="true" name="description" content="DazzleDuck can run as either an HTTP-based SQL service or a high-performance"><meta data-rh="true" property="og:description" content="DazzleDuck can run as either an HTTP-based SQL service or a high-performance"><link data-rh="true" rel="icon" href="/dazzleduck-website/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://dazzleduck-web.github.io/dazzleduck-website/docs/dazzleduck-core-servers/servers"><link data-rh="true" rel="alternate" href="https://dazzleduck-web.github.io/dazzleduck-website/docs/dazzleduck-core-servers/servers" hreflang="en"><link data-rh="true" rel="alternate" href="https://dazzleduck-web.github.io/dazzleduck-website/docs/dazzleduck-core-servers/servers" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"DazzleDuck Servers","item":"https://dazzleduck-web.github.io/dazzleduck-website/docs/dazzleduck-core-servers/servers"}]}</script><link rel="alternate" type="application/rss+xml" href="/dazzleduck-website/blog/rss.xml" title="DazzleDuck SQL Server RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/dazzleduck-website/blog/atom.xml" title="DazzleDuck SQL Server Atom Feed"><link rel="stylesheet" href="/dazzleduck-website/assets/css/styles.ceb66291.css">
<script src="/dazzleduck-website/assets/js/runtime~main.af77c6c1.js" defer="defer"></script>
<script src="/dazzleduck-website/assets/js/main.0edcfa97.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/dazzleduck-website/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/dazzleduck-website/"><div class="navbar__logo"><img src="/dazzleduck-website/img/logo.png" alt="Dazzle Duck Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/dazzleduck-website/img/logo.png" alt="Dazzle Duck Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Dazzle Duck</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/dazzleduck-website/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/dazzleduck-website/blog">Blog</a><a class="navbar__item navbar__link" href="/dazzleduck-website/about">About</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/dazzleduck-web/dazzleduck-sql-server" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/dazzleduck-website/docs/intro"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dazzleduck-website/docs/intro"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dazzleduck-website/docs/about"><span title="About" class="linkLabel_WmDU">About</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/dazzleduck-website/docs/quick-start/quickstart"><span title="Quick Start" class="categoryLinkLabel_W154">Quick Start</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/dazzleduck-website/docs/dazzleduck-core-servers/servers"><span title="Core Servers" class="categoryLinkLabel_W154">Core Servers</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/dazzleduck-website/docs/dazzleduck-core-servers/servers"><span title="DazzleDuck Servers" class="linkLabel_WmDU">DazzleDuck Servers</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/dazzleduck-website/docs/dazzleduck-sql-commons/overview"><span title="Execution &amp; Ingestion" class="categoryLinkLabel_W154">Execution &amp; Ingestion</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/dazzleduck-website/docs/dazzleduck-sql-logger/overview"><span title="Observability" class="categoryLinkLabel_W154">Observability</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/dazzleduck-website/docs/dazzleduck-arrow-js-ui/overview"><span title="UI &amp; Tooling" class="categoryLinkLabel_W154">UI &amp; Tooling</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/dazzleduck-website/docs/connector/dazzleduck-sql-spark/overview"><span title="Connectors" class="categoryLinkLabel_W154">Connectors</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/dazzleduck-website/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Core Servers</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">DazzleDuck Servers</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>DazzleDuck SQL Servers</h1></header>
<p>DazzleDuck can run as either an <strong>HTTP-based SQL service</strong> or a <strong>high-performance
Arrow Flight SQL (gRPC) server</strong>. Both servers share the same execution core but
expose different protocols and client experiences.</p>
<p>Use the tabs below to explore each server in detail.</p>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">HTTP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">gRPC (Flight SQL)</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><h1>DazzleDuck SQL HTTP Server</h1><blockquote>
<p>HTTP layer that exposes DuckDB as a remote, Arrow-native analytics service.</p>
</blockquote><div><hr><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" translate="no">​</a></h2><p>The <strong>DazzleDuck SQL HTTP Server</strong> provides a <strong>RESTful HTTP interface</strong> on top of the DazzleDuck SQL execution engine. It allows clients to execute analytical SQL queries, ingest Arrow data, and manage query lifecycles using simple HTTP requests, while internally delegating all execution to a <strong>single Arrow Flight SQL producer backed by DuckDB</strong>.</p><p>This module is intentionally designed as a <strong>thin HTTP façade</strong> — it does not re-implement query planning or execution logic. Instead, it focuses on:</p><ul>
<li class="">HTTP request handling</li>
<li class="">Authentication and authorization</li>
<li class="">Streaming Arrow results over HTTP</li>
<li class="">Coordinating ingestion and query lifecycle APIs</li>
</ul><hr><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-this-server-provides">What This Server Provides<a href="#what-this-server-provides" class="hash-link" aria-label="Direct link to What This Server Provides" title="Direct link to What This Server Provides" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="api-reference-http">API Reference (HTTP)<a href="#api-reference-http" class="hash-link" aria-label="Direct link to API Reference (HTTP)" title="Direct link to API Reference (HTTP)" translate="no">​</a></h3><p>All API endpoints are prefixed with <code>/v1</code>.</p><table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Endpoint</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/v1/login</code></td><td style="text-align:left">Authenticate and retrieve a JWT token.</td></tr><tr><td style="text-align:left"><code>GET/POST</code></td><td style="text-align:left"><code>/v1/query</code></td><td style="text-align:left">Execute a SQL query. Params: <code>q</code> (query string).</td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/v1/plan</code></td><td style="text-align:left">Generate a query plan (splits) for distributed execution.</td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/v1/ingest</code></td><td style="text-align:left">Upload Arrow stream to a Parquet file. Query param: <code>path</code>.</td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/v1/cancel</code></td><td style="text-align:left">Cancel a currently running query.</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/v1/ui</code></td><td style="text-align:left">Open the web dashboard.</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/health</code></td><td style="text-align:left">Server health check (Unversioned).</td></tr></tbody></table><hr><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-design-principles">Key Design Principles<a href="#key-design-principles" class="hash-link" aria-label="Direct link to Key Design Principles" title="Direct link to Key Design Principles" translate="no">​</a></h2><ul>
<li class=""><strong>Arrow-first</strong>: All data transfer uses Apache Arrow formats</li>
<li class=""><strong>Single execution core</strong>: One DuckDB + Flight SQL producer handles all work</li>
<li class=""><strong>Streaming by default</strong>: Large results are streamed with backpressure awareness</li>
<li class=""><strong>Minimal abstraction</strong>: HTTP layer stays thin and predictable</li>
</ul><hr><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="when-to-use-the-http-server">When to Use the HTTP Server<a href="#when-to-use-the-http-server" class="hash-link" aria-label="Direct link to When to Use the HTTP Server" title="Direct link to When to Use the HTTP Server" translate="no">​</a></h2><p>This module is ideal when you need:</p><ul>
<li class="">SQL-over-HTTP access to DuckDB</li>
<li class="">A backend for web-based analytics</li>
<li class="">Lightweight data APIs returning Arrow data</li>
<li class="">A bridge between Arrow pipelines and SQL analytics</li>
</ul><hr><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="relationship-to-other-modules">Relationship to Other Modules<a href="#relationship-to-other-modules" class="hash-link" aria-label="Direct link to Relationship to Other Modules" title="Direct link to Relationship to Other Modules" translate="no">​</a></h2><ul>
<li class=""><strong>Execution</strong>: Delegates to <code>dazzleduck-sql-flight</code></li>
<li class=""><strong>Security</strong>: Integrates with <code>dazzleduck-sql-login</code></li>
<li class=""><strong>Metrics</strong>: Exposes telemetry via <code>dazzleduck-sql-micrometer</code></li>
<li class=""><strong>UI</strong>: Serves the Arrow JS frontend</li>
</ul><hr><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="architecture">Architecture<a href="#architecture" class="hash-link" aria-label="Direct link to Architecture" title="Direct link to Architecture" translate="no">​</a></h2><blockquote>
<p>Internal design of the DazzleDuck SQL HTTP Server.</p>
</blockquote><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="high-level-design">High-Level Design<a href="#high-level-design" class="hash-link" aria-label="Direct link to High-Level Design" title="Direct link to High-Level Design" translate="no">​</a></h3><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HTTP / HTTPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Helidon WebServer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">QueryService        → FlightProducer.getStream()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PlanningService     → FlightProducer.getFlightInfo()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IngestionService    → Bulk Arrow ingestion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CancelService       → Query interruption</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LoginService        → JWT issuance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DuckDB execution engine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(exposed via Arrow Flight SQL)</span><br></span></code></pre></div></div><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="delegation-model">Delegation Model<a href="#delegation-model" class="hash-link" aria-label="Direct link to Delegation Model" title="Direct link to Delegation Model" translate="no">​</a></h3><p>The HTTP layer:</p><ul>
<li class="">Does <strong>not</strong> execute SQL itself</li>
<li class="">Does <strong>not</strong> manage DuckDB state</li>
<li class="">Acts as a protocol bridge</li>
</ul><p>All query execution, planning, ingestion, and cancellation are delegated to a <strong>single Flight SQL producer</strong>.</p><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="streaming-model">Streaming Model<a href="#streaming-model" class="hash-link" aria-label="Direct link to Streaming Model" title="Direct link to Streaming Model" translate="no">​</a></h3><ul>
<li class="">Results are streamed as Arrow IPC batches</li>
<li class="">Backpressure is honored end-to-end</li>
<li class="">Large results do not accumulate in memory</li>
</ul><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="error-handling">Error Handling<a href="#error-handling" class="hash-link" aria-label="Direct link to Error Handling" title="Direct link to Error Handling" translate="no">​</a></h3><p>Custom exception hierarchy maps failures to HTTP responses:</p><table><thead><tr><th>Exception</th><th>HTTP Status</th></tr></thead><tbody><tr><td>BadRequestException</td><td>400</td></tr><tr><td>UnauthorizedException</td><td>401</td></tr><tr><td>InternalErrorException</td><td>500</td></tr></tbody></table><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary" translate="no">​</a></h3><p>The HTTP server provides a clean separation:</p><ul>
<li class="">Thin HTTP façade</li>
<li class="">Unified execution engine</li>
<li class="">Predictable data flow</li>
</ul></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><h1>DazzleDuck SQL Flight Server</h1><blockquote>
<p>Production-grade Apache Arrow Flight SQL server for DuckDB</p>
</blockquote><div><hr><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview-1">Overview<a href="#overview-1" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" translate="no">​</a></h2><p>The <strong>DazzleDuck SQL Flight Server</strong> exposes DuckDB as a <strong>remote, high-performance analytical database</strong> using <strong>Apache Arrow Flight SQL</strong>. It transforms DuckDB from an embedded, single-process engine into a <strong>multi-client, server-based analytics backend</strong> while preserving DuckDB&#x27;s vectorized execution and Arrow-native data flow.</p><p>This module is designed for <strong>BI tools, data science workloads, and distributed query engines</strong> that require:</p><ul>
<li class="">JDBC / ADBC compatibility</li>
<li class="">High-throughput streaming results</li>
<li class="">Low-latency analytical queries</li>
<li class="">Secure authentication and authorization</li>
<li class="">Production-safe query lifecycle management</li>
</ul><p>Unlike the HTTP module, this server speaks <strong>pure Flight SQL (gRPC)</strong> and behaves like a full-fledged analytical database service.</p><hr><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-capabilities">Key Capabilities<a href="#key-capabilities" class="hash-link" aria-label="Direct link to Key Capabilities" title="Direct link to Key Capabilities" translate="no">​</a></h2><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="native-flight-sql-execution">Native Flight SQL Execution<a href="#native-flight-sql-execution" class="hash-link" aria-label="Direct link to Native Flight SQL Execution" title="Direct link to Native Flight SQL Execution" translate="no">​</a></h3><ul>
<li class="">Full Apache Arrow Flight SQL compliance</li>
<li class="">Prepared statements and metadata APIs</li>
<li class="">Multi-batch Arrow streaming</li>
<li class="">Zero-copy columnar transfer</li>
<li class="">Compatible with JDBC, Python (ADBC), Go, and Rust clients</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="security--authorization">Security &amp; Authorization<a href="#security--authorization" class="hash-link" aria-label="Direct link to Security &amp; Authorization" title="Direct link to Security &amp; Authorization" translate="no">​</a></h3><ul>
<li class="">JWT-based authentication</li>
<li class="">Header-driven authorization context</li>
<li class="">Path-level and table-level access enforcement</li>
<li class="">Claim-aware query execution (org, tenant, role, etc.)</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="data-ingestion">Data Ingestion<a href="#data-ingestion" class="hash-link" aria-label="Direct link to Data Ingestion" title="Direct link to Data Ingestion" translate="no">​</a></h3><ul>
<li class="">Arrow IPC ingestion</li>
<li class="">Parquet-backed persistence</li>
<li class="">Partitioned writes</li>
<li class="">Transform expressions during ingest</li>
<li class="">Concurrent and idempotent ingestion support</li>
</ul><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="operational-features">Operational Features<a href="#operational-features" class="hash-link" aria-label="Direct link to Operational Features" title="Direct link to Operational Features" translate="no">​</a></h3><ul>
<li class="">Query cancellation</li>
<li class="">Fetch-size control</li>
<li class="">Startup SQL initialization</li>
<li class="">Split planning for distributed execution</li>
<li class="">Warehouse-backed persistence</li>
</ul><hr><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="high-level-architecture">High-Level Architecture<a href="#high-level-architecture" class="hash-link" aria-label="Direct link to High-Level Architecture" title="Direct link to High-Level Architecture" translate="no">​</a></h2><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Client (JDBC / ADBC / FlightSQL)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Arrow Flight SQL Server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── Authentication &amp; Authorization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── Query Planner &amp; Validator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── Split &amp; Execution Engine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── Ingestion Pipeline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DuckDB Engine</span><br></span></code></pre></div></div><p>All SQL execution flows through a single <strong>FlightSQL producer</strong>, ensuring consistent semantics, security, and performance.</p><hr><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="when-to-use-flight-sql-mode">When to Use Flight SQL Mode<a href="#when-to-use-flight-sql-mode" class="hash-link" aria-label="Direct link to When to Use Flight SQL Mode" title="Direct link to When to Use Flight SQL Mode" translate="no">​</a></h2><p>Choose <strong>Flight SQL</strong> when you need:</p><ul>
<li class="">High-throughput analytical queries</li>
<li class="">JDBC or BI tool integration (DBeaver, Tableau, Superset)</li>
<li class="">Arrow-native streaming to Python / Spark</li>
<li class="">Secure multi-client access to DuckDB</li>
<li class="">Production-grade SQL APIs</li>
</ul><hr><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="installation--setup">Installation &amp; Setup<a href="#installation--setup" class="hash-link" aria-label="Direct link to Installation &amp; Setup" title="Direct link to Installation &amp; Setup" translate="no">​</a></h2><p>This guide explains how to run <strong>DazzleDuck SQL Flight Server</strong> in production.</p><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" translate="no">​</a></h3><ul>
<li class="">
<p><strong>Java:</strong> JDK 21+</p>
</li>
<li class="">
<p><strong>Maven</strong></p>
</li>
<li class="">
<p><strong>Docker:</strong> Recommended for production deployments</p>
</li>
<li class="">
<p><strong>Ports:</strong></p>
<ul>
<li class=""><code>59307</code> — Arrow Flight SQL (gRPC)</li>
</ul>
</li>
</ul><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="run-via-docker-recommended">Run via Docker (Recommended)<a href="#run-via-docker-recommended" class="hash-link" aria-label="Direct link to Run via Docker (Recommended)" title="Direct link to Run via Docker (Recommended)" translate="no">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-ti</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">59307</span><span class="token plain">:59307 </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8081</span><span class="token plain">:8081 dazzleduck/dazzleduck:latest </span><span class="token parameter variable" style="color:#36acaa">--conf</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">warehouse</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/data</span><br></span></code></pre></div></div><p>This will print the following on the console:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">============================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DazzleDuck SQL Server v0.0.13-SNAPSHOT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">============================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Warehouse Path: /data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HTTP Server started successfully</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Listening on: http://0.0.0.0:8081</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Health check: http://0.0.0.0:8081/health</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UI dashboard: http://0.0.0.0:8081/v1/ui</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Flight Server is up: Listening on URI: grpc+tcp://0.0.0.0:59307</span><br></span></code></pre></div></div><ul>
<li class="">The server is running in both Arrow Flight SQL (gRPC) and HTTP REST API modes</li>
</ul><h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-runtime-flags">Key Runtime Flags<a href="#key-runtime-flags" class="hash-link" aria-label="Direct link to Key Runtime Flags" title="Direct link to Key Runtime Flags" translate="no">​</a></h4><table><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>warehouse</code></td><td>Path to Parquet / DuckDB storage</td></tr><tr><td><code>access_mode</code></td><td><code>OPEN</code> or <code>RESTRICTED</code></td></tr><tr><td><code>flight.port</code></td><td>gRPC port (default: 59307)</td></tr></tbody></table><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="run-locally-via-runtime">Run Locally (via runtime)<a href="#run-locally-via-runtime" class="hash-link" aria-label="Direct link to Run Locally (via runtime)" title="Direct link to Run Locally (via runtime)" translate="no">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./mvnw clean package </span><span class="token parameter variable" style="color:#36acaa">-DskipTests</span><br></span></code></pre></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">MAVEN_OPTS</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;--add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED&quot;</span><br></span></code></pre></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./mvnw exec:java </span><span class="token parameter variable" style="color:#36acaa">-pl</span><span class="token plain"> dazzleduck-sql-runtime </span><span class="token parameter variable" style="color:#36acaa">-Dexec.mainClass</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;io.dazzleduck.sql.runtime.Main&quot;</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-Dexec.args</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;--conf warehouse=warehouse&quot;</span><br></span></code></pre></div></div><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="startup-sql">Startup SQL<a href="#startup-sql" class="hash-link" aria-label="Direct link to Startup SQL" title="Direct link to Startup SQL" translate="no">​</a></h3><p>You can configure startup SQL scripts (extensions, settings, secrets) to be executed automatically during server boot.</p><p>Example:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">INSTALL httpfs</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> httpfs</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="enable-tls-optional">Enable TLS (Optional)<a href="#enable-tls-optional" class="hash-link" aria-label="Direct link to Enable TLS (Optional)" title="Direct link to Enable TLS (Optional)" translate="no">​</a></h3><p>Use encryption for production:</p><div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">use_encryption = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keystore = &quot;server.key&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server_cert = &quot;server.crt&quot;</span><br></span></code></pre></div></div><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="warehouse-directory">Warehouse Directory<a href="#warehouse-directory" class="hash-link" aria-label="Direct link to Warehouse Directory" title="Direct link to Warehouse Directory" translate="no">​</a></h3><p>Choose where DuckDB persists data:</p><div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">warehouse.path = /var/dazzleduck/warehouse</span><br></span></code></pre></div></div><p>Directory layout example:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">warehouse/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ├── tables/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ├── ingest/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> └── temp/</span><br></span></code></pre></div></div><p>Ensure this path is writable by the server process.</p><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="notes">Notes<a href="#notes" class="hash-link" aria-label="Direct link to Notes" title="Direct link to Notes" translate="no">​</a></h3><ul>
<li class="">Always configure a persistent warehouse path</li>
<li class="">Enable JWT authentication in production</li>
<li class="">Use TLS for gRPC when exposed publicly</li>
<li class="">Monitor memory usage for large result sets</li>
</ul><hr><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="authentication--authorization">Authentication &amp; Authorization<a href="#authentication--authorization" class="hash-link" aria-label="Direct link to Authentication &amp; Authorization" title="Direct link to Authentication &amp; Authorization" translate="no">​</a></h2><p>DazzleDuck SQL Flight Server supports <strong>JWT-based authentication</strong> and fine-grained authorization for production workloads.</p><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="authentication-model">Authentication Model<a href="#authentication-model" class="hash-link" aria-label="Direct link to Authentication Model" title="Direct link to Authentication Model" translate="no">​</a></h3><ul>
<li class="">Clients authenticate using <strong>JWT tokens</strong></li>
<li class="">Tokens are validated at the Flight SQL layer</li>
<li class="">Claims are propagated into query execution context</li>
</ul><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="jwt-claims-usage">JWT Claims Usage<a href="#jwt-claims-usage" class="hash-link" aria-label="Direct link to JWT Claims Usage" title="Direct link to JWT Claims Usage" translate="no">​</a></h3><p>JWT claims can be used to:</p><ul>
<li class="">Restrict accessible paths</li>
<li class="">Enforce tenant / org isolation</li>
<li class="">Apply row-level filters</li>
<li class="">Control allowed functions</li>
</ul><p>Common claims:</p><table><thead><tr><th>Claim</th><th>Purpose</th></tr></thead><tbody><tr><td><code>org</code></td><td>Tenant / organization isolation</td></tr><tr><td><code>role</code></td><td>Authorization level</td></tr><tr><td><code>path</code></td><td>Allowed warehouse paths</td></tr><tr><td><code>database</code></td><td>Catalog control</td></tr><tr><td><code>schema</code></td><td>Schema filtering</td></tr><tr><td><code>table</code></td><td>Table-level access</td></tr><tr><td><code>filter</code></td><td>Row-level filtering</td></tr></tbody></table><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="header-based-context">Header-Based Context<a href="#header-based-context" class="hash-link" aria-label="Direct link to Header-Based Context" title="Direct link to Header-Based Context" translate="no">​</a></h3><p>Flight SQL supports passing execution context via headers:</p><ul>
<li class="">Authorization tokens</li>
<li class="">Dataset paths</li>
<li class="">Execution hints</li>
</ul><p>This allows <strong>stateless</strong>, secure query execution.</p><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="access-modes">Access Modes<a href="#access-modes" class="hash-link" aria-label="Direct link to Access Modes" title="Direct link to Access Modes" translate="no">​</a></h3><table><thead><tr><th>Mode</th><th>Description</th></tr></thead><tbody><tr><td><code>COMPLETE</code></td><td>No auth required (dev only)</td></tr><tr><td><code>RESTRICTED</code></td><td>JWT required for all queries</td></tr></tbody></table><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="client-example-java">Client Example (Java)<a href="#client-example-java" class="hash-link" aria-label="Direct link to Client Example (Java)" title="Direct link to Client Example (Java)" translate="no">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">FlightClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">allocator</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> location</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">intercept</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">AuthUtils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createClientMiddlewareFactory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">Map</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;cluster_id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;TEST_CLUSTER&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-restrict-access-to-one-table">Example: Restrict Access to One Table<a href="#example-restrict-access-to-one-table" class="hash-link" aria-label="Direct link to Example: Restrict Access to One Table" title="Direct link to Example: Restrict Access to One Table" translate="no">​</a></h3><h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="jwt-payload">JWT Payload<a href="#jwt-payload" class="hash-link" aria-label="Direct link to JWT Payload" title="Direct link to JWT Payload" translate="no">​</a></h4><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;table&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;users&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;filter&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;key = &#x27;k2&#x27;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div><h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="result">Result<a href="#result" class="hash-link" aria-label="Direct link to Result" title="Direct link to Result" translate="no">​</a></h4><ul>
<li class="">Only table <code>users</code> visible</li>
<li class="">Only filtered rows returned</li>
<li class="">Other tables throw authorization error</li>
</ul><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="production-recommendations">Production Recommendations<a href="#production-recommendations" class="hash-link" aria-label="Direct link to Production Recommendations" title="Direct link to Production Recommendations" translate="no">​</a></h3><ul>
<li class="">Always enable JWT in production</li>
<li class="">Rotate signing keys regularly</li>
<li class="">Validate claims strictly</li>
<li class="">Combine with TLS for secure transport</li>
</ul><hr><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="data-ingestion-flight-sql">Data Ingestion (Flight SQL)<a href="#data-ingestion-flight-sql" class="hash-link" aria-label="Direct link to Data Ingestion (Flight SQL)" title="Direct link to Data Ingestion (Flight SQL)" translate="no">​</a></h2><p>The Flight SQL module supports <strong>high-throughput Arrow-native ingestion</strong> directly into the warehouse.</p><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="supported-formats">Supported Formats<a href="#supported-formats" class="hash-link" aria-label="Direct link to Supported Formats" title="Direct link to Supported Formats" translate="no">​</a></h3><ul>
<li class="">Apache Arrow IPC streams</li>
<li class="">Parquet output</li>
</ul><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ingestion-flow">Ingestion Flow<a href="#ingestion-flow" class="hash-link" aria-label="Direct link to Ingestion Flow" title="Direct link to Ingestion Flow" translate="no">​</a></h3><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Client (Arrow IPC)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Flight SQL Ingestion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── Validation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── Optional Transformations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── Partitioning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parquet Files in Warehouse</span><br></span></code></pre></div></div><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="features">Features<a href="#features" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features" translate="no">​</a></h3><h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="partitioning">Partitioning<a href="#partitioning" class="hash-link" aria-label="Direct link to Partitioning" title="Direct link to Partitioning" translate="no">​</a></h4><ul>
<li class="">Partition by one or more columns</li>
<li class="">Hive-style directory layout</li>
</ul><h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="transformations">Transformations<a href="#transformations" class="hash-link" aria-label="Direct link to Transformations" title="Direct link to Transformations" translate="no">​</a></h4><ul>
<li class="">Apply expressions during ingest</li>
<li class="">Compute derived columns</li>
</ul><h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="concurrency">Concurrency<a href="#concurrency" class="hash-link" aria-label="Direct link to Concurrency" title="Direct link to Concurrency" translate="no">​</a></h4><ul>
<li class="">Fully concurrent ingestion</li>
<li class="">Safe for parallel writers</li>
</ul><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-conceptual">Example (Conceptual)<a href="#example-conceptual" class="hash-link" aria-label="Direct link to Example (Conceptual)" title="Direct link to Example (Conceptual)" translate="no">​</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> arrow_stream</span><br></span></code></pre></div></div><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="production-considerations">Production Considerations<a href="#production-considerations" class="hash-link" aria-label="Direct link to Production Considerations" title="Direct link to Production Considerations" translate="no">​</a></h3><ul>
<li class="">Use partitioning for large datasets</li>
<li class="">Monitor disk usage</li>
<li class="">Prefer Arrow streams over row-based inserts</li>
</ul><hr><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="jdbc--client-connectivity">JDBC &amp; Client Connectivity<a href="#jdbc--client-connectivity" class="hash-link" aria-label="Direct link to JDBC &amp; Client Connectivity" title="Direct link to JDBC &amp; Client Connectivity" translate="no">​</a></h2><p>DazzleDuck SQL Flight Server is fully compatible with <strong>Apache Arrow Flight SQL JDBC and ADBC clients</strong>.</p><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="jdbc-connection">JDBC Connection<a href="#jdbc-connection" class="hash-link" aria-label="Direct link to JDBC Connection" title="Direct link to JDBC Connection" translate="no">​</a></h3><h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="driver">Driver<a href="#driver" class="hash-link" aria-label="Direct link to Driver" title="Direct link to Driver" translate="no">​</a></h4><p>Use the <strong>Arrow Flight SQL JDBC Driver</strong>.</p><h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="connection-url">Connection URL<a href="#connection-url" class="hash-link" aria-label="Direct link to Connection URL" title="Direct link to Connection URL" translate="no">​</a></h4><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jdbc:arrow-flight-sql://localhost:59307?database=memory&amp;useEncryption=0&amp;user=admin&amp;password=admin</span><br></span></code></pre></div></div><h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="authentication">Authentication<a href="#authentication" class="hash-link" aria-label="Direct link to Authentication" title="Direct link to Authentication" translate="no">​</a></h4><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">user=admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">password=admin</span><br></span></code></pre></div></div><p>JWT-based authentication can also be used when enabled.</p><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="python-adbc">Python (ADBC)<a href="#python-adbc" class="hash-link" aria-label="Direct link to Python (ADBC)" title="Direct link to Python (ADBC)" translate="no">​</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> adbc_driver_flightsql </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> dbapi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dbapi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;grpc+tcp://localhost:59307&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cursor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> conn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cursor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cursor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELECT * FROM my_table&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cursor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fetchall</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="bi-tools">BI Tools<a href="#bi-tools" class="hash-link" aria-label="Direct link to BI Tools" title="Direct link to BI Tools" translate="no">​</a></h3><p>Verified compatibility:</p><ul>
<li class="">DBeaver</li>
<li class="">Tableau (via JDBC)</li>
<li class="">Superset</li>
</ul><hr><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-tips">Performance Tips<a href="#performance-tips" class="hash-link" aria-label="Direct link to Performance Tips" title="Direct link to Performance Tips" translate="no">​</a></h3><ul>
<li class="">Use fetch-size tuning</li>
<li class="">Prefer Arrow-native clients</li>
<li class="">Avoid row-based adapters</li>
</ul></div></div></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/dazzleduck-website/docs/quick-start/configuration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Configuration</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/dazzleduck-website/docs/dazzleduck-sql-commons/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#what-this-server-provides" class="table-of-contents__link toc-highlight">What This Server Provides</a><ul><li><a href="#api-reference-http" class="table-of-contents__link toc-highlight">API Reference (HTTP)</a></li></ul></li><li><a href="#key-design-principles" class="table-of-contents__link toc-highlight">Key Design Principles</a></li><li><a href="#when-to-use-the-http-server" class="table-of-contents__link toc-highlight">When to Use the HTTP Server</a></li><li><a href="#relationship-to-other-modules" class="table-of-contents__link toc-highlight">Relationship to Other Modules</a></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a><ul><li><a href="#high-level-design" class="table-of-contents__link toc-highlight">High-Level Design</a></li><li><a href="#delegation-model" class="table-of-contents__link toc-highlight">Delegation Model</a></li><li><a href="#streaming-model" class="table-of-contents__link toc-highlight">Streaming Model</a></li><li><a href="#error-handling" class="table-of-contents__link toc-highlight">Error Handling</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></li><li><a href="#overview-1" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#key-capabilities" class="table-of-contents__link toc-highlight">Key Capabilities</a><ul><li><a href="#native-flight-sql-execution" class="table-of-contents__link toc-highlight">Native Flight SQL Execution</a></li><li><a href="#security--authorization" class="table-of-contents__link toc-highlight">Security &amp; Authorization</a></li><li><a href="#data-ingestion" class="table-of-contents__link toc-highlight">Data Ingestion</a></li><li><a href="#operational-features" class="table-of-contents__link toc-highlight">Operational Features</a></li></ul></li><li><a href="#high-level-architecture" class="table-of-contents__link toc-highlight">High-Level Architecture</a></li><li><a href="#when-to-use-flight-sql-mode" class="table-of-contents__link toc-highlight">When to Use Flight SQL Mode</a></li><li><a href="#installation--setup" class="table-of-contents__link toc-highlight">Installation &amp; Setup</a><ul><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#run-via-docker-recommended" class="table-of-contents__link toc-highlight">Run via Docker (Recommended)</a></li><li><a href="#run-locally-via-runtime" class="table-of-contents__link toc-highlight">Run Locally (via runtime)</a></li><li><a href="#startup-sql" class="table-of-contents__link toc-highlight">Startup SQL</a></li><li><a href="#enable-tls-optional" class="table-of-contents__link toc-highlight">Enable TLS (Optional)</a></li><li><a href="#warehouse-directory" class="table-of-contents__link toc-highlight">Warehouse Directory</a></li><li><a href="#notes" class="table-of-contents__link toc-highlight">Notes</a></li></ul></li><li><a href="#authentication--authorization" class="table-of-contents__link toc-highlight">Authentication &amp; Authorization</a><ul><li><a href="#authentication-model" class="table-of-contents__link toc-highlight">Authentication Model</a></li><li><a href="#jwt-claims-usage" class="table-of-contents__link toc-highlight">JWT Claims Usage</a></li><li><a href="#header-based-context" class="table-of-contents__link toc-highlight">Header-Based Context</a></li><li><a href="#access-modes" class="table-of-contents__link toc-highlight">Access Modes</a></li><li><a href="#client-example-java" class="table-of-contents__link toc-highlight">Client Example (Java)</a></li><li><a href="#example-restrict-access-to-one-table" class="table-of-contents__link toc-highlight">Example: Restrict Access to One Table</a></li><li><a href="#production-recommendations" class="table-of-contents__link toc-highlight">Production Recommendations</a></li></ul></li><li><a href="#data-ingestion-flight-sql" class="table-of-contents__link toc-highlight">Data Ingestion (Flight SQL)</a><ul><li><a href="#supported-formats" class="table-of-contents__link toc-highlight">Supported Formats</a></li><li><a href="#ingestion-flow" class="table-of-contents__link toc-highlight">Ingestion Flow</a></li><li><a href="#features" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#example-conceptual" class="table-of-contents__link toc-highlight">Example (Conceptual)</a></li><li><a href="#production-considerations" class="table-of-contents__link toc-highlight">Production Considerations</a></li></ul></li><li><a href="#jdbc--client-connectivity" class="table-of-contents__link toc-highlight">JDBC &amp; Client Connectivity</a><ul><li><a href="#jdbc-connection" class="table-of-contents__link toc-highlight">JDBC Connection</a></li><li><a href="#python-adbc" class="table-of-contents__link toc-highlight">Python (ADBC)</a></li><li><a href="#bi-tools" class="table-of-contents__link toc-highlight">BI Tools</a></li><li><a href="#performance-tips" class="table-of-contents__link toc-highlight">Performance Tips</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/dazzleduck-website/docs/intro">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/dazzleduck-website/docs/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/dazzleduck-website/docs/quick-start/quickstart">Quick Start</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/dazzleduck-website/">Stack Overflow</a></li><li class="footer__item"><a class="footer__link-item" href="/dazzleduck-website/">Discord</a></li><li class="footer__item"><a class="footer__link-item" href="/dazzleduck-website/">X</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/dazzleduck-website/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/dazzleduck-web/dazzleduck-sql-server" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 DazzleDuck Web, Built with ❤️</div></div></div></footer></div>
</body>
</html>