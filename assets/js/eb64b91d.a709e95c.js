"use strict";(globalThis.webpackChunkdazzleduck_website=globalThis.webpackChunkdazzleduck_website||[]).push([[9356],{6462:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"dazzleduck-sql-logger/README","title":"README","description":"\x3c!--","source":"@site/docs/dazzleduck-sql-logger/README.md","sourceDirName":"dazzleduck-sql-logger","slug":"/dazzleduck-sql-logger/","permalink":"/dazzleduck-website/docs/dazzleduck-sql-logger/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"README - SQL Logger"},"sidebar":"docSidebar","previous":{"title":"Internals","permalink":"/dazzleduck-website/docs/dazzleduck-sql-logger/internals"},"next":{"title":"Overview","permalink":"/dazzleduck-website/docs/dazzleduck-sql-micrometer/overview"}}');var r=s(4848),l=s(8453);const t={sidebar_label:"README - SQL Logger"},o="DazzleDuck Log Tail \u2192 Arrow Pipeline",d={},a=[{value:"What This Project Does",id:"what-this-project-does",level:2},{value:"Core Components",id:"core-components",level:2},{value:"Log Processing",id:"log-processing",level:3},{value:"Sending &amp; Ingestion",id:"sending--ingestion",level:3},{value:"Log Generation (Testing)",id:"log-generation-testing",level:3},{value:"Running the Log Processor",id:"running-the-log-processor",level:2},{value:"Entry Point",id:"entry-point",level:3},{value:"What it does",id:"what-it-does",level:3},{value:"End-to-End Testing",id:"end-to-end-testing",level:2},{value:"EndToEndTest",id:"endtoendtest",level:3},{value:"Unit Tests",id:"unit-tests",level:2},{value:"LogTailToArrowProcessorTest",id:"logtailtoarrowprocessortest",level:3},{value:"Log Format",id:"log-format",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Design Goals",id:"design-goals",level:2},{value:"When to Use This",id:"when-to-use-this",level:2},{value:"Status",id:"status",level:2}];function c(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"dazzleduck-log-tail--arrow-pipeline",children:"DazzleDuck Log Tail \u2192 Arrow Pipeline"})}),"\n",(0,r.jsxs)(n.p,{children:["This project implements a ",(0,r.jsx)(n.strong,{children:"log ingestion pipeline"})," that tails JSON log files from disk, converts them into ",(0,r.jsx)(n.strong,{children:"Apache Arrow"})," format, and sends them to a ",(0,r.jsx)(n.strong,{children:"DazzleDuck HTTP server"})," for ingestion and storage (Parquet)."]}),"\n",(0,r.jsxs)(n.p,{children:["It supports ",(0,r.jsx)(n.strong,{children:"real-time log ingestion"}),", batching, fault tolerance, and full ",(0,r.jsx)(n.strong,{children:"end-to-end testing"})," with real servers and real files."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"what-this-project-does",children:"What This Project Does"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Watches a directory for log files (",(0,r.jsx)(n.code,{children:"*.log"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Reads new JSON log entries incrementally (tailing)"}),"\n",(0,r.jsx)(n.li,{children:"Converts log records into Apache Arrow batches"}),"\n",(0,r.jsx)(n.li,{children:"Sends Arrow data to a DazzleDuck HTTP ingestion endpoint"}),"\n",(0,r.jsx)(n.li,{children:"Writes ingested data as Parquet in the warehouse"}),"\n",(0,r.jsx)(n.li,{children:"Supports local testing, unit tests, and real end-to-end runs"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"core-components",children:"Core Components"}),"\n",(0,r.jsx)(n.h3,{id:"log-processing",children:"Log Processing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"LogFileTailReader"}),(0,r.jsx)(n.br,{}),"\n","Detects new log files and tails appended lines safely."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"LogTailToArrowProcessor"}),(0,r.jsx)(n.br,{}),"\n","Orchestrates tailing \u2192 JSON parsing \u2192 Arrow conversion \u2192 sending."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"JsonToArrowConverter"}),(0,r.jsx)(n.br,{}),"\n","Converts log JSON records into Arrow vectors using a fixed schema."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"sending--ingestion",children:"Sending & Ingestion"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HttpSender"}),(0,r.jsx)(n.br,{}),"\n","Handles authentication (JWT), batching, retries, and backpressure when sending Arrow streams."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"log-generation-testing",children:"Log Generation (Testing)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"SimpleLogGenerator"}),(0,r.jsx)(n.br,{}),"\n","Writes basic static JSON logs (unit tests)."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"LogFileGenerator"}),(0,r.jsx)(n.br,{}),"\n","Generates realistic rolling log files for end-to-end testing."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"running-the-log-processor",children:"Running the Log Processor"}),"\n",(0,r.jsx)(n.p,{children:"The processor can be run as a standalone application."}),"\n",(0,r.jsx)(n.h3,{id:"entry-point",children:"Entry Point"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"LogProcessorMain\n"})}),"\n",(0,r.jsx)(n.h3,{id:"what-it-does",children:"What it does"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Reads configuration from ",(0,r.jsx)(n.code,{children:"application.conf"})]}),"\n",(0,r.jsx)(n.li,{children:"Starts directory monitoring"}),"\n",(0,r.jsx)(n.li,{children:"Continuously processes logs until shutdown"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"end-to-end-testing",children:"End-to-End Testing"}),"\n",(0,r.jsx)(n.h3,{id:"endtoendtest",children:"EndToEndTest"}),"\n",(0,r.jsxs)(n.p,{children:["Runs a ",(0,r.jsx)(n.strong,{children:"real pipeline"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Starts the real DazzleDuck HTTP server"}),"\n",(0,r.jsx)(n.li,{children:"Creates temporary log & warehouse directories"}),"\n",(0,r.jsx)(n.li,{children:"Generates real log files on disk"}),"\n",(0,r.jsx)(n.li,{children:"Tails logs and sends Arrow data"}),"\n",(0,r.jsx)(n.li,{children:"Verifies Parquet ingestion using DuckDB"}),"\n",(0,r.jsx)(n.li,{children:"Cleans up resources"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This test validates:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"File tailing"}),"\n",(0,r.jsx)(n.li,{children:"JSON parsing"}),"\n",(0,r.jsx)(n.li,{children:"Arrow conversion"}),"\n",(0,r.jsx)(n.li,{children:"HTTP ingestion"}),"\n",(0,r.jsx)(n.li,{children:"Parquet output correctness"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"unit-tests",children:"Unit Tests"}),"\n",(0,r.jsx)(n.h3,{id:"logtailtoarrowprocessortest",children:"LogTailToArrowProcessorTest"}),"\n",(0,r.jsx)(n.p,{children:"Covers:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Single and multiple log files"}),"\n",(0,r.jsx)(n.li,{children:"Invalid JSON handling"}),"\n",(0,r.jsx)(n.li,{children:"Empty files"}),"\n",(0,r.jsx)(n.li,{children:"Missing files"}),"\n",(0,r.jsx)(n.li,{children:"Correct Parquet record counts"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"All tests use temporary directories and clean up automatically."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"log-format",children:"Log Format"}),"\n",(0,r.jsxs)(n.p,{children:["Logs must be ",(0,r.jsx)(n.strong,{children:"one JSON object per line"}),", for example:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "timestamp": "2024-01-01T10:00:00Z",\n  "level": "INFO",\n  "thread": "main",\n  "logger": "App",\n  "message": "Hello world"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Invalid JSON lines are safely skipped."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Java 21+"}),"\n",(0,r.jsx)(n.li,{children:"Apache Arrow"}),"\n",(0,r.jsx)(n.li,{children:"DuckDB"}),"\n",(0,r.jsx)(n.li,{children:"SLF4J"}),"\n",(0,r.jsx)(n.li,{children:"DazzleDuck SQL Server (HTTP mode)"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"design-goals",children:"Design Goals"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Streaming-friendly"}),"\n",(0,r.jsx)(n.li,{children:"Low memory overhead"}),"\n",(0,r.jsx)(n.li,{children:"Safe file tailing"}),"\n",(0,r.jsx)(n.li,{children:"Backpressure-aware ingestion"}),"\n",(0,r.jsx)(n.li,{children:"Production-like testing with real servers"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"when-to-use-this",children:"When to Use This"}),"\n",(0,r.jsx)(n.p,{children:"Use this project if you need:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"File-based log ingestion"}),"\n",(0,r.jsx)(n.li,{children:"Arrow-based transport"}),"\n",(0,r.jsx)(n.li,{children:"Real-time or near-real-time analytics"}),"\n",(0,r.jsx)(n.li,{children:"Reliable end-to-end validation"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"status",children:"Status"}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 Fully working",(0,r.jsx)(n.br,{}),"\n","\u2705 End-to-end verified",(0,r.jsx)(n.br,{}),"\n","\u2705 Production-ready pipeline"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var i=s(6540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);