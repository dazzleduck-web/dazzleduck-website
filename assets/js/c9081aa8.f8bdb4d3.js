"use strict";(globalThis.webpackChunkdazzleduck_website=globalThis.webpackChunkdazzleduck_website||[]).push([[9470],{7089:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"dazzleduck-sql-logger/internals","title":"Internals (Advanced)","description":"Internals around file tailing + HTTP ingestion","source":"@site/docs/dazzleduck-sql-logger/internals.md","sourceDirName":"dazzleduck-sql-logger","slug":"/dazzleduck-sql-logger/internals","permalink":"/dazzleduck-website/docs/dazzleduck-sql-logger/internals","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_label":"Internals","sidebar_position":5},"sidebar":"docSidebar","previous":{"title":"Configuration","permalink":"/dazzleduck-website/docs/dazzleduck-sql-logger/configuration"},"next":{"title":"README - SQL Logger","permalink":"/dazzleduck-website/docs/dazzleduck-sql-logger/"}}');var l=r(4848),i=r(8453);const d={sidebar_label:"Internals",sidebar_position:5},o="Internals (Advanced)",t={},a=[{value:"Arrow Schema",id:"arrow-schema",level:2},{value:"Processing Loop",id:"processing-loop",level:2},{value:"Detailed Flow",id:"detailed-flow",level:3},{value:"Backpressure Model",id:"backpressure-model",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Security Model",id:"security-model",level:2},{value:"Performance Notes",id:"performance-notes",level:2}];function c(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"internals-advanced",children:"Internals (Advanced)"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Internals around file tailing + HTTP ingestion"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"arrow-schema",children:"Arrow Schema"}),"\n",(0,l.jsx)(n.p,{children:"Logs are transmitted as Arrow rows with the following fields:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"timestamp\nlevel\nlogger\nthread\nmessage\napplication_id\napplication_name\napplication_host\nfile_name\n"})}),"\n",(0,l.jsx)(n.p,{children:"All fields are UTF8 for compatibility and simplicity."}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"processing-loop",children:"Processing Loop"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"File tail \u2192 JSON parse \u2192 Arrow batch \u2192 HTTP send\n"})}),"\n",(0,l.jsx)(n.h3,{id:"detailed-flow",children:"Detailed Flow"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Log lines are read from files"}),"\n",(0,l.jsx)(n.li,{children:"JSON objects are validated"}),"\n",(0,l.jsx)(n.li,{children:"Records are appended to Arrow vectors"}),"\n",(0,l.jsx)(n.li,{children:"Batches are flushed based on size or time"}),"\n",(0,l.jsx)(n.li,{children:"Arrow IPC streams are sent via HTTP"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"backpressure-model",children:"Backpressure Model"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Uses bounded queues"}),"\n",(0,l.jsx)(n.li,{children:"Prevents unbounded memory growth"}),"\n",(0,l.jsx)(n.li,{children:"Drops logs under sustained pressure"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["This design prioritizes ",(0,l.jsx)(n.strong,{children:"application safety over log completeness"}),"."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Invalid JSON is skipped"}),"\n",(0,l.jsx)(n.li,{children:"Network failures trigger retries"}),"\n",(0,l.jsx)(n.li,{children:"Persistent failures result in drops"}),"\n",(0,l.jsx)(n.li,{children:"Sender threads never block producers"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"security-model",children:"Security Model"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Transport security is provided by the HTTP layer"}),"\n",(0,l.jsxs)(n.li,{children:["JWT authentication is supported via ",(0,l.jsx)(n.code,{children:"HttpProducer"})]}),"\n",(0,l.jsx)(n.li,{children:"Secrets should be provided via environment variables"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"performance-notes",children:"Performance Notes"}),"\n",(0,l.jsx)(n.p,{children:"This design avoids:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Line-by-line text parsing"}),"\n",(0,l.jsx)(n.li,{children:"Regex-heavy processing"}),"\n",(0,l.jsx)(n.li,{children:"Synchronous I/O"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Resulting in ",(0,l.jsx)(n.strong,{children:"analytics-ready logs at scale"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>o});var s=r(6540);const l={},i=s.createContext(l);function d(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);