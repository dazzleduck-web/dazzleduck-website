"use strict";(globalThis.webpackChunkdazzleduck_website=globalThis.webpackChunkdazzleduck_website||[]).push([[6425],{8157:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"dazzleduck-arrow-js-ui/architecture","title":"Architecture","description":"The DazzleDuck Arrow JS UI follows a thin\u2011client architecture that keeps all heavy computation on the server while the browser focuses on query orchestration, Arrow decoding, and visualization.","source":"@site/docs/dazzleduck-arrow-js-ui/architecture.md","sourceDirName":"dazzleduck-arrow-js-ui","slug":"/dazzleduck-arrow-js-ui/architecture","permalink":"/dazzleduck-website/docs/dazzleduck-arrow-js-ui/architecture","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_label":"Architecture","sidebar_position":2},"sidebar":"docSidebar","previous":{"title":"Overview","permalink":"/dazzleduck-website/docs/dazzleduck-arrow-js-ui/overview"},"next":{"title":"Setup","permalink":"/dazzleduck-website/docs/dazzleduck-arrow-js-ui/setup"}}');var s=i(4848),l=i(8453);const t={sidebar_label:"Architecture",sidebar_position:2},c="Architecture",d={},o=[{value:"System Overview",id:"system-overview",level:2},{value:"Request Flow",id:"request-flow",level:2},{value:"1. Authentication",id:"1-authentication",level:3},{value:"2. Query Execution",id:"2-query-execution",level:3},{value:"3. Rendering",id:"3-rendering",level:3},{value:"4. Cancellation",id:"4-cancellation",level:3},{value:"Client Responsibilities",id:"client-responsibilities",level:2},{value:"Security Model",id:"security-model",level:2},{value:"Deployment Model",id:"deployment-model",level:2},{value:"Why This Architecture Works",id:"why-this-architecture-works",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"architecture",children:"Architecture"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"DazzleDuck Arrow JS UI"})," follows a thin\u2011client architecture that keeps all heavy computation on the server while the browser focuses on ",(0,s.jsx)(n.strong,{children:"query orchestration, Arrow decoding, and visualization"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"This design ensures scalability, correctness, and parity with real production usage."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"system-overview",children:"System Overview"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502        Web Browser        \u2502\n\u2502  (React + Arrow JS UI)    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n             \u2502 HTTP (JSON + Arrow IPC)\n             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 DazzleDuck SQL HTTP Server\u2502\n\u2502   /v1/query /v1/ingest    \u2502\n\u2502   /v1/plan  /v1/login    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n             \u2502\n             \u2502 DuckDB (Arrow Native)\n             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Warehouse (Parquet/Arrow) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"request-flow",children:"Request Flow"}),"\n",(0,s.jsx)(n.h3,{id:"1-authentication",children:"1. Authentication"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["UI sends credentials to ",(0,s.jsx)(n.code,{children:"/v1/login"})]}),"\n",(0,s.jsx)(n.li,{children:"Server returns a JWT"}),"\n",(0,s.jsxs)(n.li,{children:["JWT is stored ",(0,s.jsx)(n.strong,{children:"in memory only"})," (never persisted)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-query-execution",children:"2. Query Execution"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["SQL is sent via ",(0,s.jsx)(n.code,{children:"/v1/query"})," (GET or POST)"]}),"\n",(0,s.jsx)(n.li,{children:"Server executes SQL inside DuckDB"}),"\n",(0,s.jsxs)(n.li,{children:["Results streamed back as ",(0,s.jsx)(n.strong,{children:"Arrow IPC"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-rendering",children:"3. Rendering"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Arrow JS decodes IPC buffers"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Data is rendered as:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Tables"}),"\n",(0,s.jsx)(n.li,{children:"Charts"}),"\n",(0,s.jsx)(n.li,{children:"Raw inspection views"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"4-cancellation",children:"4. Cancellation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Queries include a ",(0,s.jsx)(n.code,{children:"queryId"})]}),"\n",(0,s.jsxs)(n.li,{children:["UI can call ",(0,s.jsx)(n.code,{children:"/v1/cancel"})," to interrupt execution"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"client-responsibilities",children:"Client Responsibilities"}),"\n",(0,s.jsx)(n.p,{children:"The UI intentionally keeps logic minimal:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Session lifecycle"}),"\n",(0,s.jsx)(n.li,{children:"Query state management"}),"\n",(0,s.jsx)(n.li,{children:"Arrow decoding"}),"\n",(0,s.jsx)(n.li,{children:"Visualization"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"All correctness, authorization, planning, and execution remain server\u2011side."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"security-model",children:"Security Model"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["JWT Bearer tokens in ",(0,s.jsx)(n.code,{children:"Authorization"})," header"]}),"\n",(0,s.jsx)(n.li,{children:"Claims propagate execution context (org, path, function)"}),"\n",(0,s.jsx)(n.li,{children:"No credentials or tokens written to disk"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"deployment-model",children:"Deployment Model"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Static frontend assets"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Can be hosted:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Behind the DazzleDuck HTTP server (",(0,s.jsx)(n.code,{children:"/v1/ui"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"As a standalone static site"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"why-this-architecture-works",children:"Why This Architecture Works"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Zero data duplication"}),"\n",(0,s.jsx)(n.li,{children:"Arrow end\u2011to\u2011end"}),"\n",(0,s.jsx)(n.li,{children:"Same behavior as real clients (curl, DuckDB, JDBC)"}),"\n",(0,s.jsx)(n.li,{children:"Production\u2011safe by default"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>c});var r=i(6540);const s={},l=r.createContext(s);function t(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);