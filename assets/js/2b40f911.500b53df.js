"use strict";(globalThis.webpackChunkdazzleduck_website=globalThis.webpackChunkdazzleduck_website||[]).push([[646],{1160:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"dazzleduck-sql-micrometer/querying","title":"Querying Metrics with SQL","description":"Analyze Micrometer metrics using SQL after ingestion into DazzleDuck.","source":"@site/docs/dazzleduck-sql-micrometer/querying.md","sourceDirName":"dazzleduck-sql-micrometer","slug":"/dazzleduck-sql-micrometer/querying","permalink":"/dazzleduck-website/docs/dazzleduck-sql-micrometer/querying","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_label":"SQL Queries","sidebar_position":4},"sidebar":"docSidebar","previous":{"title":"Metric & Arrow Schema","permalink":"/dazzleduck-website/docs/dazzleduck-sql-micrometer/schema"},"next":{"title":"README - SQL Micrometer","permalink":"/dazzleduck-website/docs/dazzleduck-sql-micrometer/"}}');var s=n(4848),l=n(8453);const t={sidebar_label:"SQL Queries",sidebar_position:4},a="Querying Metrics with SQL",c={},o=[{value:"Query Metrics Tables",id:"query-metrics-tables",level:2},{value:"Analyze Latency",id:"analyze-latency",level:2},{value:"Find High\u2011Volume Counters",id:"find-highvolume-counters",level:2},{value:"Group by Tag",id:"group-by-tag",level:2},{value:"Application\u2011Level Filtering",id:"applicationlevel-filtering",level:2},{value:"Historical Analysis",id:"historical-analysis",level:2},{value:"Export Metrics",id:"export-metrics",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const i={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"querying-metrics-with-sql",children:"Querying Metrics with SQL"})}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsx)(i.p,{children:"Analyze Micrometer metrics using SQL after ingestion into DazzleDuck."}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"query-metrics-tables",children:"Query Metrics Tables"}),"\n",(0,s.jsx)(i.p,{children:"Once ingested, metrics are stored as Parquet in the DazzleDuck warehouse and can be queried using DuckDB or DazzleDuck SQL Server."}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-sql",children:"SELECT * FROM metrics;\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"analyze-latency",children:"Analyze Latency"}),"\n",(0,s.jsx)(i.p,{children:"Inspect timer behavior:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-sql",children:"SELECT name, mean, max FROM metrics WHERE type = 'timer';\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"find-highvolume-counters",children:"Find High\u2011Volume Counters"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-sql",children:"SELECT name, value FROM metrics WHERE type = 'counter' ORDER BY value DESC;\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"group-by-tag",children:"Group by Tag"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-sql",children:"SELECT tags['endpoint'] AS endpoint, AVG(mean) AS avg_latency FROM metrics WHERE type = 'timer' GROUP BY endpoint;\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"applicationlevel-filtering",children:"Application\u2011Level Filtering"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-sql",children:"SELECT * FROM metrics WHERE application_name = 'orders';\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"historical-analysis",children:"Historical Analysis"}),"\n",(0,s.jsx)(i.p,{children:"If metrics are partitioned by time or application:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-sql",children:"SELECT application_name, AVG(mean) AS avg_latency FROM metrics GROUP BY application_name;\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"export-metrics",children:"Export Metrics"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-sql",children:"COPY metrics TO 'metrics_snapshot.parquet';\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(i.p,{children:"With DazzleDuck SQL Micrometer you can:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Query metrics with SQL"}),"\n",(0,s.jsx)(i.li,{children:"Join metrics with other datasets"}),"\n",(0,s.jsx)(i.li,{children:"Track regressions"}),"\n",(0,s.jsx)(i.li,{children:"Perform offline analysis"}),"\n"]})]})}function u(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>t,x:()=>a});var r=n(6540);const s={},l=r.createContext(s);function t(e){const i=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(l.Provider,{value:i},e.children)}}}]);