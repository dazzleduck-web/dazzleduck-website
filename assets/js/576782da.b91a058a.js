"use strict";(globalThis.webpackChunkdazzleduck_website=globalThis.webpackChunkdazzleduck_website||[]).push([[6785],{7673:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>t,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"dazzleduck-sql-commons/transformation","title":"SQL Transformation","description":"AST-based SQL rewriting, normalization, and structural query manipulation.","source":"@site/docs/dazzleduck-sql-commons/transformation.md","sourceDirName":"dazzleduck-sql-commons","slug":"/dazzleduck-sql-commons/transformation","permalink":"/dazzleduck-website/docs/dazzleduck-sql-commons/transformation","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_label":"SQL Transformation","sidebar_position":3},"sidebar":"docSidebar","previous":{"title":"Connection Pool","permalink":"/dazzleduck-website/docs/dazzleduck-sql-commons/connectionPool"},"next":{"title":"Query Fingerprinting","permalink":"/dazzleduck-website/docs/dazzleduck-sql-commons/fingerprint"}}');var s=i(4848),a=i(8453);const l={sidebar_label:"SQL Transformation",sidebar_position:3},o="SQL Transformation",t={},c=[{value:"Overview",id:"overview",level:2},{value:"Parsing SQL",id:"parsing-sql",level:2},{value:"Capabilities",id:"capabilities",level:2},{value:"Example",id:"example",level:2},{value:"Usage in DazzleDuck",id:"usage-in-dazzleduck",level:2},{value:"Production Considerations",id:"production-considerations",level:2}];function d(n){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"sql-transformation",children:"SQL Transformation"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"AST-based SQL rewriting, normalization, and structural query manipulation."}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(e.p,{children:["SQL Commons includes a ",(0,s.jsx)(e.strong,{children:"parser-driven transformation engine"})," that converts SQL strings into an Abstract Syntax Tree (AST)."]}),"\n",(0,s.jsx)(e.p,{children:"This allows safe, semantic-aware query rewriting instead of fragile string replacements."}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"parsing-sql",children:"Parsing SQL"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"SqlTree tree = Transformations.parseToTree(sql);\n"})}),"\n",(0,s.jsx)(e.p,{children:"Once parsed, the query can be inspected and modified programmatically."}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"capabilities",children:"Capabilities"}),"\n",(0,s.jsx)(e.p,{children:"The transformation engine supports:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Literal removal"}),"\n",(0,s.jsx)(e.li,{children:"Predicate normalization"}),"\n",(0,s.jsx)(e.li,{children:"Column remapping"}),"\n",(0,s.jsx)(e.li,{children:"Function rewriting"}),"\n",(0,s.jsx)(e.li,{children:"Canonical formatting"}),"\n",(0,s.jsx)(e.li,{children:"Structural equality checks"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(e.p,{children:"Input:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"SELECT * FROM users WHERE id = 100 OR id = 200\n"})}),"\n",(0,s.jsx)(e.p,{children:"Transformed:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"SELECT * FROM users WHERE id IN (?, ?)\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"usage-in-dazzleduck",children:"Usage in DazzleDuck"}),"\n",(0,s.jsx)(e.p,{children:"This engine is used for:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Query fingerprinting"}),"\n",(0,s.jsx)(e.li,{children:"Authorization rewriting"}),"\n",(0,s.jsx)(e.li,{children:"Partition pruning"}),"\n",(0,s.jsx)(e.li,{children:"Policy enforcement"}),"\n",(0,s.jsx)(e.li,{children:"Planner optimization"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"production-considerations",children:"Production Considerations"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Always transform before hashing"}),"\n",(0,s.jsx)(e.li,{children:"Avoid transforming raw user SQL directly"}),"\n",(0,s.jsx)(e.li,{children:"Use canonical form for comparisons"}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>l,x:()=>o});var r=i(6540);const s={},a=r.createContext(s);function l(n){const e=r.useContext(a);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:l(n.components),r.createElement(a.Provider,{value:e},n.children)}}}]);